(this["webpackJsonpvideo-store-consumer"]=this["webpackJsonpvideo-store-consumer"]||[]).push([[0],{30:function(e,t,a){e.exports=a.p+"static/media/doge-rentals-logo.32fa3255.png"},32:function(e,t,a){e.exports=a(70)},37:function(e,t,a){},55:function(e,t,a){},56:function(e,t,a){},57:function(e,t,a){},58:function(e,t,a){},59:function(e,t,a){},60:function(e,t,a){},66:function(e,t,a){},67:function(e,t,a){},68:function(e,t,a){},70:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),l=a(29),r=a.n(l),o=a(5),s=a(1),i=(a(37),a(18)),m=a(14),u=a(3),d=a(9),v=a.n(d),f=a(30),E=a.n(f),h=(a(55),a(56),function(){return c.a.createElement("div",{className:"main-page body-container"},c.a.createElement("img",{className:"shiba-img",src:"https://i.imgur.com/wfbujRm.png",alt:"shiba"}))}),b=(a(57),a(58),function(e){return c.a.createElement("div",{className:"movie-container col-3 text-center mb-3 p-3"},c.a.createElement("div",{className:"flipper"},c.a.createElement("div",{className:"front"},c.a.createElement("div",{className:""},c.a.createElement("img",{src:e.imageUrl,alt:e.title,className:"movie-poster mb-3"}),c.a.createElement("h3",{className:"movie-title"},e.title),c.a.createElement("p",{className:"release-date"},c.a.createElement("strong",null,"Released"),": ",e.releaseDate))),c.a.createElement("div",{className:"back d-flex flex-column mx-auto"},c.a.createElement("img",{src:e.imageUrl,alt:e.title,className:"image-background mx-auto"}),c.a.createElement("div",{className:"back-container p-3"},c.a.createElement("div",{className:"back-inside-container"},c.a.createElement("p",{className:"movie-overview"},e.overview),c.a.createElement("button",{className:"button-bg",onClick:function(){return e.movieCallback({id:e.id,title:e.title,overview:e.overview,imageURL:e.imageUrl,releaseDate:e.releaseDate})}},e.buttonText))))))}),p=function(e){var t=Object(n.useState)({text:""}),a=Object(u.a)(t,2),l=a[0],r=a[1],o=Object(n.useState)([]),s=Object(u.a)(o,2),i=s[0],m=s[1],d=function(t){t.preventDefault(),""!==l.text?(!function(t){v.a.get("http://localhost:3000/movies?query="+t).then((function(t){if(0===t.data.length)console.log("no movies found");else{var a=t.data.map((function(t){return c.a.createElement(b,{key:t.external_id,id:t.external_id,imageUrl:t.image_url,overview:t.overview,releaseDate:t.release_date,title:t.title,buttonText:"Add movie",movieCallback:e.addMovieCallback})}));m(a)}})).catch((function(e){console.log("failed search: "+e)}))}(l.text),r({text:""})):alert("To make a search, please enter some text!")};return c.a.createElement("div",{className:"search-container container"},c.a.createElement("form",{className:"",onSubmit:d},c.a.createElement("header",{className:"search-box-title"},"Search the Database"),c.a.createElement("div",{className:"search-box-container"},c.a.createElement("input",{className:"search-box",type:"text",name:"text",placeholder:"search here",value:l.text,onChange:function(e){r({text:e.target.value})}}),c.a.createElement("input",{type:"submit",value:"Search",className:"search-btn",onSubmit:d}))),c.a.createElement("div",{className:"all-movies justify-content-center container"},i))},g=(a(59),function(e){var t=e.movies.map((function(t){return c.a.createElement(b,{key:t.id,id:t.id,imageUrl:t.imageUrl,overview:t.overview,releaseDate:t.releaseDate,title:t.title,buttonText:"Select movie",movieCallback:e.selectMovieCallback})}));return c.a.createElement("div",{className:"library-container container"},c.a.createElement("h1",{className:"library-title"},"Library"),c.a.createElement("div",{className:"all-movies justify-content-center"},t))}),N=(a(60),function(e){return c.a.createElement("div",{className:"customer-container"},c.a.createElement("img",{src:"https://placedog.net/200/200/"+e.id,alt:"dog",className:"rounded-circle"}),c.a.createElement("div",{className:"customer-info"},c.a.createElement("h4",{className:"customer-name"},c.a.createElement(o.b,{to:"/customerdetails",className:"customer-name"},e.name)),c.a.createElement("p",{className:"gray-font"},e.address),c.a.createElement("p",{className:"gray-font"},e.city,", ",e.state," ",e.postalCode),c.a.createElement("p",{className:"gray-font"},e.phone),c.a.createElement("p",null,c.a.createElement("strong",null,"Movies Checked Out: "),e.moviesCheckedOutCount)),c.a.createElement("button",{className:"button-bg",onClick:function(){e.selectCustomerCallback(e)}},"Select Customer"))}),k=(a(66),function(e){var t=e.customers.map((function(t,a){return c.a.createElement("section",{key:t.id,className:"customer-components"},c.a.createElement(N,{id:t.id,name:t.name,accountCredit:t.accountCredit,moviesCheckedOutCount:t.moviesCheckedOutCount,phone:t.phone,address:t.address,postalCode:t.postalCode,registeredAt:t.registeredAt,state:t.state,city:t.city,selectCustomerCallback:e.selectCustomerCallback}))}));return c.a.createElement("div",{className:"customers-container"},c.a.createElement("h1",{className:"customers-title"},"Customers"),c.a.createElement("div",{className:"customer-components"},t))}),x=(a(67),function(e){return c.a.createElement("tr",{key:e.id},c.a.createElement("td",null,e.name),c.a.createElement("td",null),c.a.createElement("td",null),c.a.createElement("td",null,e.title),c.a.createElement("td",null),c.a.createElement("td",null),c.a.createElement("td",null,e.checkoutDate),c.a.createElement("td",null),c.a.createElement("td",null),c.a.createElement("td",null,e.dueDate),c.a.createElement("td",null),c.a.createElement("td",null),c.a.createElement("td",null,!0===e.returned?"true":"false"),c.a.createElement("td",null),c.a.createElement("td",null,!1===e.returned&&c.a.createElement("button",{onClick:function(){return e.returnRentalCallback(e.title,e.customerId)},className:"button-bg return-btn"},"Return")))}),y=(a(68),function(e){var t=Object(n.useState)([]),a=Object(u.a)(t,2),l=a[0],r=a[1],o=Object(n.useState)({name:""}),s=Object(u.a)(o,2),i=s[0],d=s[1],f=Object(n.useState)(""),E=Object(u.a)(f,2),h=E[0],b=E[1],p=Object(n.useState)(""),g=Object(u.a)(p,2),N=g[0],k=g[1],y=function(t){var a=e.customers.find((function(e){return e.name.toLowerCase()===t.toLowerCase()}));a?(d(a),C(a.id)):b("No customer match found")},C=function(e){v.a.get("".concat("http://localhost:3000/","customers/").concat(e)).then((function(e){var t=e.data;if(0===t.length)b("no rentals found");else{var a=t.map((function(e){return c.a.createElement(x,{key:e.id,customerId:e.customer_id,checkoutDate:e.checkout_date,dueDate:e.due_date,name:e.name,returned:e.returned,title:e.title,returnRentalCallback:w})}));r(a)}})).catch((function(e){b("error: "+e.cause)}))},w=function(e,t){v.a.post("http://localhost:3000/rentals/"+e+"/return?customer_id="+t).then((function(t){y(i.name),k("".concat(e," was succefully returned!")),setTimeout((function(){k("")}),3e3)})).catch((function(e){b("error: "+e.cause)}))};return c.a.createElement("div",{className:"search-container body-container"},h&&c.a.createElement("div",{className:"alert"},c.a.createElement("p",null,h)),N&&c.a.createElement("p",{className:"flash-message"},N),c.a.createElement("form",{className:"",onSubmit:function(e){e.preventDefault(),y(i.name)}},c.a.createElement("header",{className:"search-box-title"},"Search for customer details"),c.a.createElement("div",{className:"search-box-container"},c.a.createElement("input",{className:"search-box",type:"text",name:"text",placeholder:"search here",onChange:function(e){var t=e.target.value,a=Object(m.a)({},i);a.name=t,d(a)},value:i.name}),c.a.createElement("input",{type:"submit",value:"Search",className:"search-btn"}))),l&&i&&c.a.createElement("div",{className:"rental-list"},c.a.createElement("table",null,c.a.createElement("thead",null,c.a.createElement("tr",null,c.a.createElement("th",null,"Name"),c.a.createElement("th",null),c.a.createElement("th",null),c.a.createElement("th",null,"Title"),c.a.createElement("th",null),c.a.createElement("th",null),c.a.createElement("th",null,"Checkout Date"),c.a.createElement("th",null),c.a.createElement("th",null),c.a.createElement("th",null,"Due Date"),c.a.createElement("th",null),c.a.createElement("th",null),c.a.createElement("th",null,"Returned"),c.a.createElement("th",null),c.a.createElement("th",null))),c.a.createElement("tbody",null,l))))}),C="http://localhost:3000/",w=function(){var e=Object(n.useState)([]),t=Object(u.a)(e,2),a=t[0],l=t[1],r=Object(n.useState)([]),d=Object(u.a)(r,2),f=d[0],b=d[1],N=Object(n.useState)({name:"N/A"}),x=Object(u.a)(N,2),w=x[0],O=x[1],j=Object(n.useState)({title:"N/A"}),_=Object(u.a)(j,2),D=_[0],S=_[1],T=Object(n.useState)({text:"",type:""}),R=Object(u.a)(T,2),A=R[0],U=R[1],L=Object(n.useState)({customer:null,movie:null,checkoutDate:null,dueDate:null,returned:!1}),M=Object(u.a)(L,2),W=M[0],F=M[1],I=Object(n.useState)([]),B=Object(u.a)(I,2),H=B[0],J=B[1],q=function(){v.a.get(C+"customers/").then((function(e){var t=e.data.map((function(e,t){return{id:e.id,name:e.name,accountCredit:e.account_credit,address:e.address,city:e.city,state:e.state,postalCode:e.postal_code,moviesCheckedOutCount:e.movies_checked_out_count,phone:e.phone,registeredAt:e.registered_at}}));b(t)})).catch((function(e){U({text:"Failed to add customers: ".concat(e.response.data.errors),type:"failure"}),setTimeout((function(){U({text:"",type:""})}),3e3)}))},Q=function(){v.a.get(C+"movies/").then((function(e){var t=e.data.map((function(e,t){return{id:e.id,imageUrl:e.image_url,overview:e.overview,releaseDate:e.release_date,title:e.title}}));l(t)})).catch((function(e){U({text:"Failed to add movie: ".concat(e.response.data.errors),type:"failure"}),setTimeout((function(){U({text:"",type:""})}),3e3)}))};Object(n.useEffect)(q,[]),Object(n.useEffect)(Q,[]);var $=function(e){e.preventDefault(),function(){var e=new Date,t=new Date((new Date).getTime()+6048e5),a=Object(m.a)({},W);a.checkoutDate=e,a.dueDate=t,a.movie=D,a.customer=w,D.title&&w.id&&v.a.post(C+"rentals/"+D.title+"/check-out?customer_id="+w.id+"&due_date="+t).then((function(e){F(a);var t=Object(i.a)(H);t.push(a),J(t),q(),O({name:"N/A"}),S({title:"N/A"}),U({text:"".concat(D.title," has been checked out to ").concat(w.name,"!"),type:"success"}),setTimeout((function(){U({text:"",type:""})}),3e3)})).catch((function(e){U({text:"Failed to add rental: ".concat(e.response.data.errors),type:"failure"}),setTimeout((function(){U({text:"",type:""})}),3e3)}))}()};return c.a.createElement(o.a,null,c.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-dark bg-dark sticky-top"},c.a.createElement(o.b,{href:"/",className:"navbar-brand"},c.a.createElement("img",{src:E.a,alt:"dog",className:"navbar__logo"}),"Doge Rentals"),c.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarNav","aria-controls":"navbarNav","aria-expanded":"false","aria-label":"Toggle navigation"},c.a.createElement("span",{className:"navbar-toggler-icon"})),c.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarNav"},c.a.createElement("ul",{className:"navbar-nav"},c.a.createElement("li",{className:"nav-item active"},c.a.createElement(o.b,{to:"/",className:"nav-link",href:"#"},"Home")),c.a.createElement("li",{className:"nav-item"},c.a.createElement(o.b,{to:"/search",className:"nav-link"},"Search")),c.a.createElement("li",{className:"nav-item"},c.a.createElement(o.b,{to:"/library",className:"nav-link"},"Library")),c.a.createElement("li",{className:"nav-item"},c.a.createElement(o.b,{to:"/customers",className:"nav-link"},"Customers")),c.a.createElement("li",{className:"nav-item"},c.a.createElement(o.b,{to:"/customerdetails",className:"nav-link"},"Customer Rental History")))),c.a.createElement("form",{className:"navbar-nav selected__container",onSubmit:$},c.a.createElement("div",{className:"text-center m-2 selected__item"},"Selected Customer",c.a.createElement("div",{className:"selected__text",onClick:function(){O({name:"N/A"})}},c.a.createElement("span",null,w.name," "))),c.a.createElement("div",{className:"text-center m-2 selected__item"},"Selected Movie",c.a.createElement("div",{className:"selected__text",onClick:function(){S({title:"N/A"})}},c.a.createElement("span",null,D.title," "))),c.a.createElement("div",{className:"text-center m-2"},"Create Rental",c.a.createElement("input",{type:"submit",value:"Rent",className:"rent-btn",onSubmit:$})))),A.text&&c.a.createElement("p",{className:"flash-"+A.type},A.text),c.a.createElement(s.c,null,c.a.createElement(s.a,{exact:!0,path:"/"},c.a.createElement(h,null)),c.a.createElement(s.a,{path:"/search"},c.a.createElement(p,{movies:a,addMovieCallback:function(e){v.a.post(C+"movies?title="+e.title+"&overview="+e.overview+"&release_date="+e.releaseDate+"&image_url="+e.imageURL+"&external_id="+e.id).then((function(t){var n=Object(i.a)(a);n.push({id:t.data.id,imageUrl:t.data.image_url,overview:t.data.overview,releaseDate:t.data.release_date,title:t.data.title}),Q(),l(n),U({text:"".concat(e.title," has been added to the rental library!"),type:"success"}),setTimeout((function(){U({text:"",type:""})}),3e3)})).catch((function(e){U({text:"Failed to add movie: ".concat(e.response.data.errors),type:"failure"}),setTimeout((function(){U({text:"",type:""})}),3e3)}))}})),c.a.createElement(s.a,{exact:!0,path:"/library"},c.a.createElement(g,{movies:a,selectMovieCallback:function(e){var t=a.find((function(t){return t.id===e.id}));S(t)}})),c.a.createElement(s.a,{exact:!0,path:"/customers"},c.a.createElement(k,{customers:f,selectCustomerCallback:function(e){O(e)}})),c.a.createElement(s.a,{path:"/customerdetails"},c.a.createElement(y,{customers:f}))))},O=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function j(e){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}})).catch((function(e){console.error("Error during service worker registration:",e)}))}a(69);r.a.render(c.a.createElement(o.a,null,c.a.createElement(s.a,{path:"/",component:w})),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("/video-store-consumer",window.location).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat("/video-store-consumer","/service-worker.js");O?(!function(e){fetch(e).then((function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):j(e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")}))):j(e)}))}}()}},[[32,1,2]]]);
//# sourceMappingURL=main.cc32453f.chunk.js.map